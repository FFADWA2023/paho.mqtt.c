<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Paho Asynchronous MQTT C Client Library: Socket.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="pahologo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Paho Asynchronous MQTT C Client Library
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_43e0a1f539e00dcfa1a6bc4d4fee4fc2.html">home</a></li><li class="navelem"><a class="el" href="dir_57cf5deee3e75679b18177788ec554ea.html">fadwaj</a></li><li class="navelem"><a class="el" href="dir_4bcf022054d1459e4e7c17169b8f3e8a.html">paho.mqtt.c</a></li><li class="navelem"><a class="el" href="dir_146a14bc394ddb4d70da0b7615890fc5.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Socket.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Socket related functions.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="_socket_8h_source.html">Socket.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_log_8h_source.html">Log.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_socket_buffer_8h_source.html">SocketBuffer.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_messages_8h_source.html">Messages.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_stack_trace_8h_source.html">StackTrace.h</a>&quot;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;signal.h&gt;</code><br />
<code>#include &lt;ctype.h&gt;</code><br />
<code>#include &quot;<a class="el" href="_heap_8h_source.html">Heap.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a6d5639d1b3a0ddfb2d1bbe55e043f47e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_socket_8c.html#a6d5639d1b3a0ddfb2d1bbe55e043f47e">ADDRLEN</a>&#160;&#160;&#160;<a class="el" href="_socket_8h.html#af776b22a727aae7c9f4d869d50df47e8">INET6_ADDRSTRLEN</a>+1</td></tr>
<tr class="separator:a6d5639d1b3a0ddfb2d1bbe55e043f47e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ae5ce8741a047dab326de1cb98ae28d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_socket_8c.html#a1ae5ce8741a047dab326de1cb98ae28d">PORTLEN</a>&#160;&#160;&#160;10</td></tr>
<tr class="separator:a1ae5ce8741a047dab326de1cb98ae28d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a90f49db5a5763c6874f27facfe9e60a3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_socket_8c.html#a90f49db5a5763c6874f27facfe9e60a3">Socket_setnonblocking</a> (int sock)</td></tr>
<tr class="separator:a90f49db5a5763c6874f27facfe9e60a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47824ad5afba267b9488150e1f7e8610"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_socket_8c.html#a47824ad5afba267b9488150e1f7e8610">Socket_error</a> (char *aString, int sock)</td></tr>
<tr class="separator:a47824ad5afba267b9488150e1f7e8610"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c690a1d23a55ccf1ea52cdea9b56432"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_socket_8c.html#a3c690a1d23a55ccf1ea52cdea9b56432">Socket_addSocket</a> (int newSd)</td></tr>
<tr class="separator:a3c690a1d23a55ccf1ea52cdea9b56432"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeec7592039c180d20ef7c6e8f50d5667"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_socket_8c.html#aeec7592039c180d20ef7c6e8f50d5667">isReady</a> (int socket, fd_set *read_set, fd_set *write_set)</td></tr>
<tr class="separator:aeec7592039c180d20ef7c6e8f50d5667"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec4ee8ecb248d29d315d2624a88ed1c3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_socket_8c.html#aec4ee8ecb248d29d315d2624a88ed1c3">Socket_writev</a> (int socket, <a class="el" href="_socket_buffer_8h.html#a5cd1cc4af320073a2251cbb27e84a96f">iobuf</a> *iovecs, int count, unsigned long *<a class="el" href="utf-8_8c.html#acb1359f3bdc4a6ab64e47c3707640a7b">bytes</a>)</td></tr>
<tr class="separator:aec4ee8ecb248d29d315d2624a88ed1c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e7c21836cd061947d6d6e28446c4a59"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_socket_8c.html#a2e7c21836cd061947d6d6e28446c4a59">Socket_close_only</a> (int socket)</td></tr>
<tr class="separator:a2e7c21836cd061947d6d6e28446c4a59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ce31969f49786ef8452e2b547527578"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_socket_8c.html#a5ce31969f49786ef8452e2b547527578">Socket_continueWrite</a> (int socket)</td></tr>
<tr class="separator:a5ce31969f49786ef8452e2b547527578"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6d884e6e7aa535234049b8234d95e3e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_socket_8c.html#ad6d884e6e7aa535234049b8234d95e3e">Socket_continueWrites</a> (fd_set *pwset)</td></tr>
<tr class="separator:ad6d884e6e7aa535234049b8234d95e3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22feda106732e755b6f9e44e026bd261"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_socket_8c.html#a22feda106732e755b6f9e44e026bd261">Socket_getaddrname</a> (struct sockaddr *sa, int sock)</td></tr>
<tr class="separator:a22feda106732e755b6f9e44e026bd261"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad246851be3980fd316d16864a786c808"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_socket_8c.html#ad246851be3980fd316d16864a786c808">Socket_abortWrite</a> (int socket)</td></tr>
<tr class="separator:ad246851be3980fd316d16864a786c808"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a573a6eea727016f3e8770f60e5eed958"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_socket_8c.html#a573a6eea727016f3e8770f60e5eed958">Socket_outInitialize</a> (void)</td></tr>
<tr class="separator:a573a6eea727016f3e8770f60e5eed958"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af365aa1d5a29ffcb83bb15edaf3401e6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_socket_8c.html#af365aa1d5a29ffcb83bb15edaf3401e6">Socket_outTerminate</a> (void)</td></tr>
<tr class="separator:af365aa1d5a29ffcb83bb15edaf3401e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a331ebe81bbc0d14bb4fc3fa4708b4e54"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_socket_8c.html#a331ebe81bbc0d14bb4fc3fa4708b4e54">Socket_getReadySocket</a> (int more_work, struct timeval *tp, pthread_mutex_t *mutex)</td></tr>
<tr class="separator:a331ebe81bbc0d14bb4fc3fa4708b4e54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9af02601f6b5ef066ba99d9498a024b8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_socket_8c.html#a9af02601f6b5ef066ba99d9498a024b8">Socket_getch</a> (int socket, char *c)</td></tr>
<tr class="separator:a9af02601f6b5ef066ba99d9498a024b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88b3b91a40c7bd0b01e3c97f1011a75e"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_socket_8c.html#a88b3b91a40c7bd0b01e3c97f1011a75e">Socket_getdata</a> (int socket, size_t <a class="el" href="utf-8_8c.html#acb1359f3bdc4a6ab64e47c3707640a7b">bytes</a>, size_t *actual_len)</td></tr>
<tr class="separator:a88b3b91a40c7bd0b01e3c97f1011a75e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae95673b434f2c489ecefe4688c80be2d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_socket_8c.html#ae95673b434f2c489ecefe4688c80be2d">Socket_noPendingWrites</a> (int socket)</td></tr>
<tr class="separator:ae95673b434f2c489ecefe4688c80be2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05dbad60845044788d3b239df98281e3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_socket_8c.html#a05dbad60845044788d3b239df98281e3">Socket_putdatas</a> (int socket, char *buf0, size_t buf0len, int count, char **buffers, size_t *buflens, int *frees)</td></tr>
<tr class="separator:a05dbad60845044788d3b239df98281e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ba07ed0157d93bde9db6483b4bb4d67"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_socket_8c.html#a8ba07ed0157d93bde9db6483b4bb4d67">Socket_addPendingWrite</a> (int socket)</td></tr>
<tr class="separator:a8ba07ed0157d93bde9db6483b4bb4d67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cf9d34480e63e2d6eaaaff09e3fddf7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_socket_8c.html#a0cf9d34480e63e2d6eaaaff09e3fddf7">Socket_clearPendingWrite</a> (int socket)</td></tr>
<tr class="separator:a0cf9d34480e63e2d6eaaaff09e3fddf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bdb051c5944e1a0fd16ba18544ab5df"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_socket_8c.html#a6bdb051c5944e1a0fd16ba18544ab5df">Socket_close</a> (int socket)</td></tr>
<tr class="separator:a6bdb051c5944e1a0fd16ba18544ab5df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23176785a5afc34efb466dac4d7fce87"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_socket_8c.html#a23176785a5afc34efb466dac4d7fce87">Socket_new</a> (char *addr, int port, int *sock)</td></tr>
<tr class="separator:a23176785a5afc34efb466dac4d7fce87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab053509afada9798dcaf8adaf16e1a59"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_socket_8c.html#ab053509afada9798dcaf8adaf16e1a59">Socket_setWriteCompleteCallback</a> (<a class="el" href="_socket_8h.html#aa4a5a3e29229f506cf31e1229d45996c">Socket_writeComplete</a> *mywritecomplete)</td></tr>
<tr class="separator:ab053509afada9798dcaf8adaf16e1a59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27952bf5cd133a873da9a218c7207059"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_socket_8c.html#a27952bf5cd133a873da9a218c7207059">Socket_getpeer</a> (int sock)</td></tr>
<tr class="separator:a27952bf5cd133a873da9a218c7207059"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a1f645e91f266ea874c8a8762118e6192"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_sockets.html">Sockets</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_socket_8c.html#a1f645e91f266ea874c8a8762118e6192">s</a></td></tr>
<tr class="separator:a1f645e91f266ea874c8a8762118e6192"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Socket related functions. </p>
<p>Some other related functions are in the SocketBuffer module </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a6d5639d1b3a0ddfb2d1bbe55e043f47e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d5639d1b3a0ddfb2d1bbe55e043f47e">&#9670;&nbsp;</a></span>ADDRLEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ADDRLEN&#160;&#160;&#160;<a class="el" href="_socket_8h.html#af776b22a727aae7c9f4d869d50df47e8">INET6_ADDRSTRLEN</a>+1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a1ae5ce8741a047dab326de1cb98ae28d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ae5ce8741a047dab326de1cb98ae28d">&#9670;&nbsp;</a></span>PORTLEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORTLEN&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a90f49db5a5763c6874f27facfe9e60a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90f49db5a5763c6874f27facfe9e60a3">&#9670;&nbsp;</a></span>Socket_setnonblocking()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Socket_setnonblocking </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set a socket non-blocking, OS independently </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sock</td><td>the socket to set non-blocking </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TCP call error code </dd></dl>

</div>
</div>
<a id="a47824ad5afba267b9488150e1f7e8610"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47824ad5afba267b9488150e1f7e8610">&#9670;&nbsp;</a></span>Socket_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Socket_error </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>aString</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets the specific error corresponding to SOCKET_ERROR </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">aString</td><td>the function that was being used when the error occurred </td></tr>
    <tr><td class="paramname">sock</td><td>the socket on which the error occurred </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the specific TCP error code </dd></dl>

</div>
</div>
<a id="a3c690a1d23a55ccf1ea52cdea9b56432"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c690a1d23a55ccf1ea52cdea9b56432">&#9670;&nbsp;</a></span>Socket_addSocket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Socket_addSocket </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>newSd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Add a socket to the list of socket to check with select </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">newSd</td><td>the new socket to add </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aeec7592039c180d20ef7c6e8f50d5667"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeec7592039c180d20ef7c6e8f50d5667">&#9670;&nbsp;</a></span>isReady()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int isReady </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fd_set *&#160;</td>
          <td class="paramname"><em>read_set</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fd_set *&#160;</td>
          <td class="paramname"><em>write_set</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Don't accept work from a client unless it is accepting work back, i.e. its socket is writeable this seems like a reasonable form of flow control, and practically, seems to work. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">socket</td><td>the socket to check </td></tr>
    <tr><td class="paramname">read_set</td><td>the socket read set (see select doc) </td></tr>
    <tr><td class="paramname">write_set</td><td>the socket write set (see select doc) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>boolean - is the socket ready to go? </dd></dl>

</div>
</div>
<a id="aec4ee8ecb248d29d315d2624a88ed1c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec4ee8ecb248d29d315d2624a88ed1c3">&#9670;&nbsp;</a></span>Socket_writev()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Socket_writev </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_socket_buffer_8h.html#a5cd1cc4af320073a2251cbb27e84a96f">iobuf</a> *&#160;</td>
          <td class="paramname"><em>iovecs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long *&#160;</td>
          <td class="paramname"><em>bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Attempts to write a series of iovec buffers to a socket in <em>one</em> system call so that they are sent as one packet. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">socket</td><td>the socket to write to </td></tr>
    <tr><td class="paramname">iovecs</td><td>an array of buffers to write </td></tr>
    <tr><td class="paramname">count</td><td>number of buffers in iovecs </td></tr>
    <tr><td class="paramname">bytes</td><td>number of bytes actually written returned </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>completion code, especially TCPSOCKET_INTERRUPTED </dd></dl>

</div>
</div>
<a id="a2e7c21836cd061947d6d6e28446c4a59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e7c21836cd061947d6d6e28446c4a59">&#9670;&nbsp;</a></span>Socket_close_only()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Socket_close_only </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>socket</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Close a socket without removing it from the select list. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">socket</td><td>the socket to close </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>completion code </dd></dl>

</div>
</div>
<a id="a5ce31969f49786ef8452e2b547527578"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ce31969f49786ef8452e2b547527578">&#9670;&nbsp;</a></span>Socket_continueWrite()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Socket_continueWrite </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>socket</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Continue an outstanding write for a particular socket </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">socket</td><td>that socket </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>completion code: 0=incomplete, 1=complete, -1=socket error </dd></dl>

</div>
</div>
<a id="ad6d884e6e7aa535234049b8234d95e3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6d884e6e7aa535234049b8234d95e3e">&#9670;&nbsp;</a></span>Socket_continueWrites()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Socket_continueWrites </td>
          <td>(</td>
          <td class="paramtype">fd_set *&#160;</td>
          <td class="paramname"><em>pwset</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Continue any outstanding writes for a socket set </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pwset</td><td>the set of sockets </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>completion code </dd></dl>

</div>
</div>
<a id="a22feda106732e755b6f9e44e026bd261"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22feda106732e755b6f9e44e026bd261">&#9670;&nbsp;</a></span>Socket_getaddrname()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * Socket_getaddrname </td>
          <td>(</td>
          <td class="paramtype">struct sockaddr *&#160;</td>
          <td class="paramname"><em>sa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Convert a numeric address to character string </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sa</td><td>socket numerical address </td></tr>
    <tr><td class="paramname">sock</td><td>socket </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the peer information </dd></dl>
<p>maximum length of the address string</p>
<p>maximum length of the port string</p>
<p>only needed for gcc/cygwin on windows</p>
<p>only needed for gcc/cygwin on windows</p>

</div>
</div>
<a id="ad246851be3980fd316d16864a786c808"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad246851be3980fd316d16864a786c808">&#9670;&nbsp;</a></span>Socket_abortWrite()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Socket_abortWrite </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>socket</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Continue an outstanding write for a particular socket </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">socket</td><td>that socket </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>completion code: 0=incomplete, 1=complete, -1=socket error </dd></dl>

</div>
</div>
<a id="a573a6eea727016f3e8770f60e5eed958"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a573a6eea727016f3e8770f60e5eed958">&#9670;&nbsp;</a></span>Socket_outInitialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Socket_outInitialize </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize the socket module </p>

</div>
</div>
<a id="af365aa1d5a29ffcb83bb15edaf3401e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af365aa1d5a29ffcb83bb15edaf3401e6">&#9670;&nbsp;</a></span>Socket_outTerminate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Socket_outTerminate </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Terminate the socket module </p>

</div>
</div>
<a id="a331ebe81bbc0d14bb4fc3fa4708b4e54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a331ebe81bbc0d14bb4fc3fa4708b4e54">&#9670;&nbsp;</a></span>Socket_getReadySocket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Socket_getReadySocket </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>more_work</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct timeval *&#160;</td>
          <td class="paramname"><em>tp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pthread_mutex_t *&#160;</td>
          <td class="paramname"><em>mutex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the next socket ready for communications as indicated by select </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">more_work</td><td>flag to indicate more work is waiting, and thus a timeout value of 0 should be used for the select </td></tr>
    <tr><td class="paramname">tp</td><td>the timeout to be used for the select, unless overridden </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the socket next ready, or 0 if none is ready </dd></dl>

</div>
</div>
<a id="a9af02601f6b5ef066ba99d9498a024b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9af02601f6b5ef066ba99d9498a024b8">&#9670;&nbsp;</a></span>Socket_getch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Socket_getch </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>c</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads one byte from a socket </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">socket</td><td>the socket to read from </td></tr>
    <tr><td class="paramname">c</td><td>the character read, returned </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>completion code </dd></dl>

</div>
</div>
<a id="a88b3b91a40c7bd0b01e3c97f1011a75e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b3b91a40c7bd0b01e3c97f1011a75e">&#9670;&nbsp;</a></span>Socket_getdata()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* Socket_getdata </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>actual_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Attempts to read a number of bytes from a socket, non-blocking. If a previous read did not finish, then retrieve that data. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">socket</td><td>the socket to read from </td></tr>
    <tr><td class="paramname">bytes</td><td>the number of bytes to read </td></tr>
    <tr><td class="paramname">actual_len</td><td>the actual number of bytes read </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>completion code </dd></dl>

</div>
</div>
<a id="ae95673b434f2c489ecefe4688c80be2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae95673b434f2c489ecefe4688c80be2d">&#9670;&nbsp;</a></span>Socket_noPendingWrites()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Socket_noPendingWrites </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>socket</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Indicate whether any data is pending outbound for a socket. </p><dl class="section return"><dt>Returns</dt><dd>boolean - true == data pending. </dd></dl>

</div>
</div>
<a id="a05dbad60845044788d3b239df98281e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05dbad60845044788d3b239df98281e3">&#9670;&nbsp;</a></span>Socket_putdatas()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Socket_putdatas </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>buf0len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>buffers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>buflens</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>frees</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Attempts to write a series of buffers to a socket in <em>one</em> system call so that they are sent as one packet. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">socket</td><td>the socket to write to </td></tr>
    <tr><td class="paramname">buf0</td><td>the first buffer </td></tr>
    <tr><td class="paramname">buf0len</td><td>the length of data in the first buffer </td></tr>
    <tr><td class="paramname">count</td><td>number of buffers </td></tr>
    <tr><td class="paramname">buffers</td><td>an array of buffers to write </td></tr>
    <tr><td class="paramname">buflens</td><td>an array of corresponding buffer lengths </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>completion code, especially TCPSOCKET_INTERRUPTED </dd></dl>

</div>
</div>
<a id="a8ba07ed0157d93bde9db6483b4bb4d67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ba07ed0157d93bde9db6483b4bb4d67">&#9670;&nbsp;</a></span>Socket_addPendingWrite()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Socket_addPendingWrite </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>socket</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Add a socket to the pending write list, so that it is checked for writing in select. This is used in connect processing when the TCP connect is incomplete, as we need to check the socket for both ready to read and write states. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">socket</td><td>the socket to add </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0cf9d34480e63e2d6eaaaff09e3fddf7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0cf9d34480e63e2d6eaaaff09e3fddf7">&#9670;&nbsp;</a></span>Socket_clearPendingWrite()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Socket_clearPendingWrite </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>socket</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Clear a socket from the pending write list - if one was added with Socket_addPendingWrite </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">socket</td><td>the socket to remove </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6bdb051c5944e1a0fd16ba18544ab5df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bdb051c5944e1a0fd16ba18544ab5df">&#9670;&nbsp;</a></span>Socket_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Socket_close </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>socket</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Close a socket and remove it from the select list. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">socket</td><td>the socket to close </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>completion code </dd></dl>

</div>
</div>
<a id="a23176785a5afc34efb466dac4d7fce87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23176785a5afc34efb466dac4d7fce87">&#9670;&nbsp;</a></span>Socket_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Socket_new </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>sock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a new socket and TCP connect to an address/port </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>the address string </td></tr>
    <tr><td class="paramname">port</td><td>the TCP port </td></tr>
    <tr><td class="paramname">sock</td><td>returns the new socket </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>completion code </dd></dl>

</div>
</div>
<a id="ab053509afada9798dcaf8adaf16e1a59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab053509afada9798dcaf8adaf16e1a59">&#9670;&nbsp;</a></span>Socket_setWriteCompleteCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Socket_setWriteCompleteCallback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_socket_8h.html#aa4a5a3e29229f506cf31e1229d45996c">Socket_writeComplete</a> *&#160;</td>
          <td class="paramname"><em>mywritecomplete</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a27952bf5cd133a873da9a218c7207059"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27952bf5cd133a873da9a218c7207059">&#9670;&nbsp;</a></span>Socket_getpeer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* Socket_getpeer </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get information about the other end connected to a socket </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sock</td><td>the socket to inquire on </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the peer information </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a1f645e91f266ea874c8a8762118e6192"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f645e91f266ea874c8a8762118e6192">&#9670;&nbsp;</a></span>s</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_sockets.html">Sockets</a> s</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Structure to hold all socket data for the module </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Nov 19 2024 16:44:21 for Paho Asynchronous MQTT C Client Library by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
